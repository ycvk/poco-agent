# =============================================================================
# Poco Docker Compose Environment Variables
# =============================================================================
# Copy this file to .env and configure the values below.
# Variables with defaults can be omitted; required ones are marked as such.
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED: Claude API Configuration
# -----------------------------------------------------------------------------
# Your Anthropic API key. Get one from: https://console.anthropic.com/
ANTHROPIC_AUTH_TOKEN=sk-ant-xxxxx

# Optional: Use a custom API base URL (e.g., for proxy services)
# ANTHROPIC_BASE_URL=https://api.anthropic.com

# Default Claude model to use
# DEFAULT_MODEL=claude-sonnet-4-20250514

# -----------------------------------------------------------------------------
# SECURITY: CHANGE THESE IN PRODUCTION
# -----------------------------------------------------------------------------
# Secret key for backend JWT signing
BACKEND_SECRET_KEY=change-this-secret-key-in-production

# Token for internal API communication between services
INTERNAL_API_TOKEN=change-this-token-in-production

# Token for executor callbacks to manager
CALLBACK_TOKEN=change-this-token-in-production

# -----------------------------------------------------------------------------
# Service Ports (Optional)
# -----------------------------------------------------------------------------
# FRONTEND_PORT=3000
# BACKEND_PORT=8000
# EXECUTOR_MANAGER_PORT=8001
# POSTGRES_PORT=5432
# S3_PORT=9000
# S3_CONSOLE_PORT=9001

# -----------------------------------------------------------------------------
# Database (Optional - defaults are usually fine)
# -----------------------------------------------------------------------------
# POSTGRES_DB=poco
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=postgres

# -----------------------------------------------------------------------------
# S3-Compatible Storage (Optional - defaults are usually fine for local dev)
# -----------------------------------------------------------------------------
# RUSTFS_DATA_DIR=./oss_data
# S3_ACCESS_KEY=poco
# S3_SECRET_KEY=poco-secret
# S3_BUCKET=poco
# S3_REGION=us-east-1
# S3_ENDPOINT=http://rustfs:9000
# S3_PUBLIC_ENDPOINT=http://localhost:9000
# S3_FORCE_PATH_STYLE=true
#
# Cloudflare R2 example (bucket must already exist):
# S3_ENDPOINT=https://<accountid>.r2.cloudflarestorage.com
# S3_PUBLIC_ENDPOINT=https://<accountid>.r2.cloudflarestorage.com
# S3_REGION=auto
# S3_FORCE_PATH_STYLE=false

# -----------------------------------------------------------------------------
# OpenAI (Optional)
# -----------------------------------------------------------------------------
# OPENAI_API_KEY=sk-xxxxx
# OPENAI_BASE_URL=
# OPENAI_DEFAULT_MODEL=gpt-4o-mini

# -----------------------------------------------------------------------------
# Logging (Optional)
# -----------------------------------------------------------------------------
# LOG_LEVEL=INFO
# LOG_TO_FILE=false
# LOG_DIR=./logs
# LOG_BACKUP_COUNT=14
# LOG_SQL=false
# UVICORN_ACCESS_LOG=false

# -----------------------------------------------------------------------------
# Executor Manager (Optional)
# -----------------------------------------------------------------------------
# Maximum number of tasks to run concurrently
# MAX_CONCURRENT_TASKS=5

# Task polling configuration
# TASK_PULL_ENABLED=true
# Trigger-first mode: keep polling as a low-frequency fallback.
# - Immediate runs are woken up by backend -> executor-manager trigger.
# - These intervals protect you when trigger fails (network/token mismatch).
# TASK_PULL_INTERVAL_SECONDS=30
# TASK_PULL_IMMEDIATE_INTERVAL_SECONDS=20
# TASK_PULL_SCHEDULED_INTERVAL_SECONDS=30
# TASK_PULL_NIGHTLY_POLL_INTERVAL_SECONDS=10
# TASK_CLAIM_LEASE_SECONDS=180

# Workspace cleanup and archival
# WORKSPACE_CLEANUP_ENABLED=false
# WORKSPACE_ARCHIVE_ENABLED=true
# WORKSPACE_ARCHIVE_DAYS=7
# WORKSPACE_IGNORE_DOT_FILES=true

# -----------------------------------------------------------------------------
# Container Images (Optional - override for local development)
# -----------------------------------------------------------------------------
# BACKEND_IMAGE=ghcr.io/poco-ai/poco-backend:latest
# EXECUTOR_MANAGER_IMAGE=ghcr.io/poco-ai/poco-executor-manager:latest
# EXECUTOR_IMAGE=ghcr.io/poco-ai/poco-executor:latest
# FRONTEND_IMAGE=ghcr.io/poco-ai/poco-frontend:latest

# RUSTFS_IMAGE=rustfs/rustfs:latest
# RUSTFS_INIT_IMAGE=minio/mc:latest
